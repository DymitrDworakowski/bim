"use strict";(self.webpackChunkbim=self.webpackChunkbim||[]).push([[978],{924:(e,a,t)=>{t.d(a,{$5:()=>r,c5:()=>l,cc:()=>c,fO:()=>i,iD:()=>n,ri:()=>o});const s=t(9722).A.create({baseURL:"https://bim-rest-api.onrender.com/api"}),n=async e=>{try{const{data:a}=await s.post("/auth/login",{name:e.name,email:e.email,password:e.password});return a.token&&localStorage.setItem("token",a.token),a}catch(t){var a;throw console.error("Login failed:",(null===(a=t.response)||void 0===a?void 0:a.data)||t.message),t}},o=async e=>{await s.post("/auth/logout",{},{headers:{Authorization:"Bearer ".concat(e)}}),localStorage.removeItem("token")},i=async e=>{const{data:a}=await s.get("/blog",{headers:{Authorization:"Bearer ".concat(e)}});return a},r=async(e,a)=>{let{title:t,content:n,publishDate:o,isPublished:i}=e;return(await s.post("/blog",{title:t,content:n,publishDate:o,isPublished:i},{headers:{Authorization:"Bearer ".concat(a)}})).data},l=async e=>{let{id:a,data:t,token:n}=e;return(await s.put("/blog/".concat(a),t,{headers:{Authorization:"Bearer ".concat(n)}})).data},c=async(e,a)=>(await s.delete("/blog/".concat(e),{headers:{Authorization:"Bearer ".concat(a)}})).data},4597:(e,a,t)=>{t.r(a),t.d(a,{default:()=>l});t(5043);var s=t(3892),n=t(9981),o=t(924),i=t(579);const r=function(){const e=(0,n.Zp)();return(0,i.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,i.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 max-w-md w-full relative",children:[(0,i.jsx)("h2",{className:"text-xl font-bold text-blue-700 mb-6 text-center",children:"Login to Admin"}),(0,i.jsx)(s.l1,{initialValues:{name:"",email:"",password:""},validate:e=>{const a={};return e.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i.test(e.email)?e.name||(a.name="Name is required"):a.email="Invalid email address":a.email="Email is required",e.password||(a.password="Password is required"),a},onSubmit:async(a,t)=>{let{setSubmitting:s,setErrors:n}=t;try{await(0,o.iD)(a),e("/admin/blogs")}catch(i){console.error(i),n({email:"Invalid credentials"})}finally{s(!1)}},children:a=>{let{isSubmitting:t}=a;return(0,i.jsxs)(s.lV,{className:"flex flex-col gap-4",children:[(0,i.jsxs)("div",{children:[(0,i.jsx)(s.D0,{type:"name",name:"name",placeholder:"Name *",className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,i.jsx)(s.Kw,{name:"name",component:"div",className:"text-red-500 text-sm mt-1"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(s.D0,{type:"email",name:"email",placeholder:"Email *",className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,i.jsx)(s.Kw,{name:"email",component:"div",className:"text-red-500 text-sm mt-1"})]}),(0,i.jsxs)("div",{children:[(0,i.jsx)(s.D0,{type:"password",name:"password",placeholder:"Has\u0142o *",className:"w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,i.jsx)(s.Kw,{name:"password",component:"div",className:"text-red-500 text-sm mt-1"})]}),(0,i.jsx)("button",{type:"submit",disabled:t,className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg shadow transition-colors",children:t?"Logging in...":"Zaloguj si\u0119"}),(0,i.jsx)("button",{type:"button",className:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-6 rounded-lg shadow transition-colors",onClick:()=>e("/"),children:"Powr\xf3t na stron\u0119 g\u0142\xf3wn\u0105"})]})}})]})})};const l=function(){return(0,i.jsx)("div",{children:(0,i.jsx)(r,{})})}}}]);
//# sourceMappingURL=978.94b48467.chunk.js.map